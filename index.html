<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSLC | Professional Lawn Care</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .slider-container { position: relative; width: 100%; aspect-ratio: 16/9; overflow: hidden; border-radius: 1.5rem; }
        .img-before { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .img-after { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; clip-path: inset(0 0 0 50%); }
        .slider-handle { position: absolute; top: 0; bottom: 0; left: 50%; width: 4px; background: white; cursor: ew-resize; transform: translateX(-50%); z-index: 10; }
        .slider-handle::after { content: '‚Üî'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 44px; height: 44px; background: white; color: #166534; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen pb-10 text-slate-900">

    <nav class="bg-white border-b p-6 sticky top-0 z-50 shadow-sm">
        <div class="max-w-md mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-extrabold text-green-800 tracking-tighter">NSLC</h1>
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em]">Lawn Care Services</p>
            </div>
            <div class="flex bg-slate-100 p-1 rounded-xl shadow-inner">
                <button onclick="switchTab('public')" id="btn-public" class="px-3 py-1.5 text-[10px] font-bold uppercase rounded-lg transition-all bg-white shadow-sm text-green-700">Client</button>
                <button onclick="switchTab('worker')" id="btn-worker" class="px-3 py-1.5 text-[10px] font-bold uppercase rounded-lg transition-all text-slate-500">Worker</button>
            </div>
        </div>
    </nav>

    <main class="max-w-md mx-auto p-6">

        <div id="public" class="tab-content active space-y-8">
            <header>
                <h2 class="text-3xl font-extrabold text-slate-900 leading-tight">Elite Results. <br><span class="text-green-600">Local Prices.</span></h2>
                <p class="text-slate-500 mt-2 italic text-sm">Providing Epping's most affordable premium lawn care.</p>
            </header>

            <div class="slider-container shadow-2xl border-4 border-white" id="nslcSlider">
    
    <img src="pictures/illam.jfif" alt="Before" class="img-before">
    
    <img src="pictures/illam2.jfif" alt="After" class="img-after">
    
    <div class="slider-handle"></div>
    
    <span class="absolute bottom-4 left-4 bg-black/60 backdrop-blur-sm text-white text-[10px] px-2 py-1 rounded font-bold uppercase tracking-widest">Before</span>
    <span class="absolute bottom-4 right-4 bg-green-700/80 backdrop-blur-sm text-white text-[10px] px-2 py-1 rounded font-bold uppercase tracking-widest">After</span>
</div>

            <div class="bg-green-700 p-8 rounded-3xl text-white shadow-xl shadow-green-200 text-center text-sm font-bold">
                <h3 class="font-extrabold text-xl mb-1">Ready for a better lawn?</h3>
                <p class="text-green-100 mb-6">Contact us for a free quote (AUD).</p>
                <a href="tel:0400000000" class="block w-full bg-white text-green-700 py-4 rounded-xl font-extrabold shadow-lg">Call NSLC Today</a>
            </div>
        </div>

        <div id="auth" class="tab-content space-y-4 pt-10">
            <div class="text-center">
                <div class="inline-block p-4 bg-slate-100 rounded-full mb-4">üîí</div>
                <h2 class="font-bold text-slate-400 uppercase text-xs tracking-widest">Worker Access Required</h2>
            </div>
            <input type="password" id="pinInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="4" class="w-full p-6 text-center text-4xl border rounded-2xl tracking-[0.5em] outline-none focus:border-green-600 bg-white shadow-sm">
            <button onclick="checkPin()" class="w-full bg-slate-800 text-white py-5 rounded-2xl font-bold hover:bg-black transition-all">Unlock Portal</button>
        </div>

        <div id="worker" class="tab-content space-y-6">
            
            <div class="bg-green-50 p-6 rounded-3xl border border-green-100 shadow-sm">
                <h3 class="font-bold text-green-800 mb-4 flex items-center gap-2">üá¶üá∫ Whole Job Calculator</h3>
                
                <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                    <div>
                        <label class="block text-[10px] uppercase font-bold text-green-600 mb-1">Lawn Size (m¬≤)</label>
                        <input type="number" id="sqm" oninput="calc()" placeholder="300" class="w-full p-3 border rounded-xl outline-none">
                    </div>
                    <div>
                        <label class="block text-[10px] uppercase font-bold text-green-600 mb-1">Difficulty (1-3)</label>
                        <input type="number" id="complex" oninput="calc()" value="1" min="1" max="3" class="w-full p-3 border rounded-xl outline-none">
                    </div>
                </div>

                <div class="space-y-2 mb-4">
                    <label class="block text-[10px] uppercase font-bold text-green-600 mb-1 text-sm">Add-ons (AUD)</label>
                    <label class="flex items-center justify-between bg-white p-3 rounded-xl border text-sm">
                        <span>üåø Hedge Trimming</span>
                        <input type="checkbox" id="addHedge" onchange="calc()" class="w-5 h-5 accent-green-600">
                    </label>
                    <label class="flex items-center justify-between bg-white p-3 rounded-xl border text-sm">
                        <span>‚úÇÔ∏è Weed Whacker (Edging)</span>
                        <input type="checkbox" id="addWhacker" onchange="calc()" class="w-5 h-5 accent-green-600">
                    </label>
                    <label class="flex items-center justify-between bg-white p-3 rounded-xl border text-sm">
                        <span>ü§≤ Hand Weeding</span>
                        <input type="checkbox" id="addWeeding" onchange="calc()" class="w-5 h-5 accent-green-600">
                    </label>
                </div>

                <div class="bg-white p-4 rounded-2xl border border-green-200">
                    <p class="text-xs font-bold text-green-600 uppercase">Suggested Total</p>
                    <p class="text-3xl font-black text-green-700">$<span id="suggested">0</span> <span class="text-sm font-normal">AUD</span></p>
                </div>
            </div>

            <div class="bg-white p-6 rounded-3xl shadow-xl border border-slate-100 space-y-4">
                <h2 class="font-extrabold text-slate-800 flex items-center gap-2">‚úçÔ∏è Log Job Details</h2>
                <input type="text" id="workerName" placeholder="Your Name" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-600">
                <input type="text" id="clientName" placeholder="Client Name & Address" class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-600">
                <textarea id="serviceList" rows="3" placeholder="Services performed..." class="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:border-green-600"></textarea>
                
                <div class="relative">
                    <span class="absolute left-4 top-4 font-bold text-slate-400">$</span>
                    <input type="number" id="price" placeholder="Final Price (AUD)" class="w-full p-4 pl-8 bg-slate-50 border rounded-2xl font-bold text-green-700 outline-none focus:border-green-600">
                </div>

                <button onclick="submitJob()" id="btn" class="w-full bg-green-700 text-white py-5 rounded-2xl font-bold text-lg shadow-xl shadow-green-100 hover:bg-green-800 active:scale-95 transition-all">
                    Sync to NSLC Database
                </button>
            </div>
        </div>

    </main>

    <script>
        const MASTER_PIN = "0912"; 
        const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxe5BbOmFDD1wTz1j757SkNZQgGHUgCi9bE2kTPmEgFLPE82n2HsWHFnxLB8X7UhEdg/exec"; 

        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            if(tab === 'worker') {
                document.getElementById('auth').classList.add('active');
            } else {
                document.getElementById('public').classList.add('active');
            }
            const pubBtn = document.getElementById('btn-public');
            const workBtn = document.getElementById('btn-worker');
            if(tab === 'public') {
                pubBtn.className = "px-3 py-1.5 text-[10px] font-bold uppercase rounded-lg transition-all bg-white shadow-sm text-green-700";
                workBtn.className = "px-3 py-1.5 text-[10px] font-bold uppercase rounded-lg transition-all text-slate-500";
            } else {
                workBtn.className = "px-3 py-1.5 text-[10px] font-bold uppercase rounded-lg transition-all bg-white shadow-sm text-green-700";
                pubBtn.className = "px-3 py-1.5 text-[10px] font-bold uppercase rounded-lg transition-all text-slate-500";
            }
        }

        function checkPin() {
            if(document.getElementById('pinInput').value === MASTER_PIN) {
                document.getElementById('auth').classList.remove('active');
                document.getElementById('worker').classList.add('active');
            } else {
                alert("Incorrect PIN");
                document.getElementById('pinInput').value = '';
            }
        }

        function calc() {
            const sqm = document.getElementById('sqm').value || 0;
            const complexity = document.getElementById('complex').value || 1;
            
            // Base Mowing: $35 base + $0.05 per m2
            let total = (35 + (sqm * 0.05)) * complexity;

            // Add-ons (AUD)
            if(document.getElementById('addHedge').checked) total += 25;
            if(document.getElementById('addWhacker').checked) total += 15; // Weed whacker fee
            if(document.getElementById('addWeeding').checked) total += 10; // Hand weeding fee

            const finalPrice = Math.round(total);
            document.getElementById('suggested').innerText = finalPrice;
            document.getElementById('price').value = finalPrice;
        }

        async function submitJob() {
            const btn = document.getElementById('btn');
            const payload = {
                worker: document.getElementById('workerName').value,
                name: document.getElementById('clientName').value,
                services: document.getElementById('serviceList').value,
                price: document.getElementById('price').value
            };
            if(!payload.name || !payload.worker) return alert("Fill in info.");
            btn.disabled = true;
            btn.innerText = "Syncing...";
            try {
                await fetch(WEB_APP_URL, {
                    method: "POST",
                    mode: "no-cors",
                    headers: { "Content-Type": "text/plain" },
                    body: JSON.stringify(payload)
                });
                alert("Synced!");
                location.reload();
            } catch (e) {
                alert("Error! Check URL.");
                btn.disabled = false;
            }
        }

        // Slider logic
        const slider = document.getElementById('nslcSlider');
        const handle = slider.querySelector('.slider-handle');
        const imgAfter = slider.querySelector('.img-after');
        function moveSlider(e) {
            const rect = slider.getBoundingClientRect();
            let pageX = e.pageX || (e.touches ? e.touches[0].pageX : 0);
            let percent = ((pageX - rect.left) / rect.width) * 100;
            percent = Math.max(0, Math.min(100, percent));
            handle.style.left = percent + '%';
            imgAfter.style.clipPath = `inset(0 0 0 ${percent}%)`;
        }
        slider.addEventListener('mousemove', moveSlider);
        slider.addEventListener('touchmove', (e) => { moveSlider(e); e.preventDefault(); }, {passive: false});
    </script>
</body>
</html>
